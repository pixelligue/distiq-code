# Cursor Smart Routing

Экономь подписку Cursor в 3-5 раз через умный роутинг моделей.

---

## Установка (1 команда)

**Правый клик на `SETUP_CURSOR.bat` → "Запуск от имени администратора"**

Прокси:
1. Настроит hosts (127.0.0.1 → api2.cursor.sh)
2. Установит SSL сертификат
3. Запустится с smart routing

**Перезапусти Cursor IDE** — всё работает!

---

## Как это работает?

```
Cursor IDE
  ↓ (думает что api2.cursor.sh)
  ↓ (на самом деле localhost:443)
MITM Proxy (distiq-code)
  ↓ [Анализирует запрос]
  ↓ [Заменяет модель на дешевую]
  ↓ (форвардит на настоящий Cursor API)
Cursor API
```

### Правила роутинга

| Запрос | Cursor выбрал | Прокси заменил | Экономия |
|--------|---------------|----------------|----------|
| "Что такое async?" | claude-opus $15 | cursor-small FREE | 100% |
| "Прочитай utils.py" | claude-opus $15 | cursor-small FREE | 100% |
| "Напиши функцию сортировки" | claude-opus $15 | claude-sonnet $3 | 80% |
| "Исправь этот баг" | gpt-4 $30 | claude-sonnet $3 | 90% |

**Простые вопросы → cursor-small (бесплатно)**
**Чтение кода → cursor-small (бесплатно)**
**Генерация кода → claude-sonnet (дешевле в 5x)**

---

## Экономия

**Cursor Pro ($20/мес):**
- Без прокси: $20 кредитов тратятся за 1-2 недели
- С прокси: хватает на весь месяц

**Cursor Max ($200/мес):**
- Без прокси: расход 70%
- С прокси: расход 30%

---

## Мониторинг

Консоль прокси показывает каждое решение в реальном времени:

```
[ROUTING] Model: claude-opus -> cursor-small (simple question) | Saved ~$0.0150
[ROUTING] Model: gpt-4 -> claude-sonnet (complex task) | Saved ~$0.0270
```

Видишь что экономится на каждом запросе.

---

## Отключить

**`RESTORE_CURSOR.bat`** (от имени администратора)

Удалит hosts запись, Cursor вернется к нормальной работе.

---

## Проблемы?

**Cursor не подключается:**
- Проверь что прокси запущен (консоль показывает "Uvicorn running")
- Перезапусти Cursor IDE полностью

**SSL ошибки:**
- Прокси автоматически установит сертификат
- Если не помогло — перезагрузи систему

**Прокси не видит запросы:**
- Проверь hosts: `type C:\Windows\System32\drivers\etc\hosts`
- Должна быть строка: `127.0.0.1 api2.cursor.sh`

---

**MIT License** | Made by [Distiq](https://distiq.ru)
